<!DOCTYPE html>
<!--Inspiration: https://codepen.io/alvarotrigo/pen/KKQzvdr -->
<html>
  <title>Calendar</title>
  {% extends 'myapp/base.html'%}
  {% load static %}
  <head>

  {% block content %}
  {% block cal_css %}
  <link rel="stylesheet" href="{% static 'myapp/calendar_style.css' %}">
  <script src="https://use.fontawesome.com/releases/v6.1.1/js/all.js"></script>
  {% endblock %}
  </head>
  
  <body class = "bannerWhiteGradient">
    
  <table style="width:100%">
    <!-- For debugging: {% for day in schedule %}
      {% for courses in day %}
      <tr>
        <td>{{courses.course_days_of_week}} </td>
      </tr>
        <tr>
            <td>{{courses.course_subject}}, {{courses.start_tag}}, {{courses.end_tag}}, {{courses.course_start_time}}</td>
        </tr>
      {% endfor %}
    {% endfor %} -->
  </table>
    <div id ="SignedInScreenInnerContainer" class = "container">
    <center>
    <h1>Calendar</h1>
  </center>
    <div class="calendar">
      <div class="timeline">
        <div class="spacer"></div>
        <!-- dont delete this comment <div class="time-marker">8 AM</div> -->
        <div>8 AM</div>
        <div>9 AM</div>
        <div>10 AM</div>
        <div>11 AM</div>
        <div>12 PM</div>
        <div>1 PM</div>
        <div>2 PM</div>
        <div>3 PM</div>
        <div>4 PM</div>
        <div>5 PM</div>
        <div>6 PM</div>
        <div>7 PM</div>
        <div>8 PM</div>
      </div>
      <div class="days">
        {% for DAY, courses in week.items %}
        <div class="day {{DAY}}">
          <div class="date">
            <p class="date-day">{{DAY}}</p>
          </div>
          <div class="events">
            {% for class in courses %}
            <div class="event start-{{ class.start_tag }} end-{{ class.end_tag }} class-{{ class.coursenum }}">
              <p class="title" style = "padding-bottom:2px;">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
              <p class="time" style = "margin-bottom:1px;">{{class.course_start_time}} - {{class.course_end_time}}</p>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endfor %}

        
        <!-- <div class="day mon">
          <div class="date">
            <p class="date-day">MON</p>
          </div>
            <div class="events">
              {% for class in schedule.0 %}
              <div class="event start-{{class.start_tag }} end-{{class.end_tag }} class1">
                <p class="title">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
                <p class="time">{{class.course_start_time}} - {{class.course_end_time}}</p>
              </div>
              {% endfor %}
            </div>
        </div>

        
        <div class="day tue">
          <div class="date">
            <p class="date-day">TUE</p>
          </div>
            <div class="events">
              {% for class in schedule.1 %}
              <div class="event start-{{class.start_tag }} end-{{class.end_tag }} class1">
                <p class="title">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
                <p class="time">{{class.course_start_time}} - {{class.course_end_time}}</p>
              </div>
              {% endfor %}
            </div>
          
        </div>

        
        <div class="day wed">
          <div class="date">
            <p class="date-day">WED</p>
          </div>
            <div class="events">
              {% for class in schedule.2 %}
              <div class="event start-{{class.start_tag }} end-{{class.end_tag }} class1">
                <p class="title">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
                <p class="time">{{class.course_start_time}} - {{class.course_end_time}}</p>
              </div>
              {% endfor %}
            </div>
        </div>

        
        <div class="day thu">
          <div class="date">
            <p class="date-day">THU</p>
          </div>
            <div class="events">
              {% for class in schedule.3 %}
              <div class="event start-{{class.start_tag }} end-{{class.end_tag }} class1">
                <p class="title">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
                <p class="time">{{class.course_start_time}} - {{class.course_end_time}}</p>
              </div>
              {% endfor %}
            </div>
        </div>

        
        <div class="day fri">
          <div class="date">
            <p class="date-day">FRI</p>
          </div>
            <div class="events">
              {% for class in schedule.4 %}
              <div class="event start-{{class.start_tag }} end-{{class.end_tag }} class1">
                <p class="title">{{class.course_mnemonic}} {{class.course_catalog_nbr}}</p>
                <p class="time">{{class.course_start_time}} - {{class.course_end_time}}</p>
              </div>
              {% endfor %}
            </div>
        </div> -->

      </div>
    </div>
    <br>
  <center>
    <h1>Courses in Calendar:</h1>
  </center>
    <table style="border-collapse: collapse;
    margin: 25px 0;
    font-size: 0.9em;
    font-family: sans-serif;
    min-width: 400px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);">
      <tr class = "title-row">
        <div class = "row"> 
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Course Number</th>
          </div>
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Course Name</th>
          </div>
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Time Offered</th>
          </div>
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Professor</th>
          </div>
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Location</th>
          </div>
          <div class = "col col-lg-2 col-md-2 col-sm-2"> 
            <th>Modify Schedule</th>
          </div>
        </div>
      </tr>
      <hr>
  {% for course in courses_in_calendar %}
      <tr class = "main-rows">
          <td>{{course.course_mnemonic}} {{course.course_catalog_nbr}}
            <button id="course{{ forloop.counter }}" class = "btn btn-primary" onclick = "redirectToExternal('{{courseVar}}', '{{ course.course_mnemonic }}', '{{ course.course_catalog_nbr}}')"> Course Forum Link</button>
              <script>
                function redirectToExternal(var1, var2, var3) {
                    var url = "https://thecourseforum.com/" + var1 + "/" + var2 + "/" + var3;
                    window.location.href = url;
                }
            </script>
          </td>
          <td>{{course.course_subject}}</td>
          <td>{{course.course_days_of_week}} {{course.course_start_time}} - {{course.course_end_time}} </td>
          <td>{{course.course_instructor}}</td>
          <td>{{course.course_location}}</td>
          <td>
              <form method="POST" action="{% url 'removeFromSchedule' course.pk%}">
                {% csrf_token %}
                <input type="hidden" name="pk" value="{{ course.pk }}">
                <button type="submit" class = "btn btn-danger buttonShoppingCartandBrowseCourses"> <strong>Drop Course</strong>
                  <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                    </svg>
                </button>
              </form>
            </td>
      </tr>
  {% endfor %}
  </table>

  <br>
  <br>
  <br>
  <center>
  <h1>Submit Course Calender for Approval:</h1>
  <hr>
  <br>
  {% if usersSchedule is None %}
    <h4>Status: Schedule Not Submitted <i class="fa-light fa-memo-circle-check" style="color: #07cf1f;"></i></h1>
  {% elif usersSchedule.isRejected%}
    <h4>Status: Rejected By Advisor <i class="fa-regular fa-circle-xmark" style="color: #ec1349;"></i></h3>
  {% elif usersSchedule.status %}
    <h4>Status: Approved By Advisor <i class="fa-solid fa-square-check" style="color: #46b458;"></i></h1>
  {% else %}
    <h4>Status: Pending(Waiting On Advisor)<i class="fa-regular fa-hourglass" style="color: #e0d900;"></i></h1>
  {% endif %}
  <br>
  <hr>
  <form method="POST" action="{% url 'createSchedule' user.pk %}">
    {% csrf_token %}
    <input type="hidden" name="pk" value="{{user.pk}}">
    <button type="submit" class = "btn btn-success buttonShoppingCartandBrowseCourses"> <strong>Submit Schedule to Advisor</strong>
      <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
        </svg>
    </button>
  </form>
</center>
  </body>

  {% endblock %}
</html>